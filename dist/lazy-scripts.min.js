!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).LazyScripts=t()}(this,function(){"use strict";function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function v(o){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?t(Object(i),!0).forEach(function(e){var t,r,n;t=o,n=i[r=e],r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(i,e))})}return o}function i(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var r=0;r<this.length;r++)e.call(t,this[r],r,this)});var h=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.queue=[],this.callback=e}var e,r,n;return e=t,(r=[{key:"push",value:function(e){this.queue=[].concat(i(this.queue),i(e)),this.callback&&this.callback(this.queue)}},{key:"shift",value:function(){return this.queue.shift()}},{key:"length",value:function(){return this.queue.length}}])&&o(e.prototype,r),n&&o(e,n),t}();function m(e){return e.replace("[data-","").replace("]","").replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})}return function(){var r,n=v({lazyScriptsInitialized:"lsi",lazyScriptSelector:"[data-lazy-script]",lazyScriptsSelector:"[data-lazy-scripts]",lazyScriptDoneSelector:"[data-lazy-script-done]",lazyScriptLoadedEventName:"lazyScriptLoaded",mutationObserverOptions:{attributes:!1,childList:!0,subtree:!0},intersectionObserverOptions:{root:null,threshold:0}},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}),e=document.documentElement;if("true"!==e.dataset[n.lazyScriptsInitialized]){var o,i="",a="",c="",u=!1,s="\n    ".concat(n.lazyScriptSelector,":not(").concat(n.lazyScriptDoneSelector,"),\n    ").concat(n.lazyScriptsSelector,":not(").concat(n.lazyScriptDoneSelector,")\n  "),l={},t=document.querySelectorAll(s);e.dataset[n.lazyScriptsInitialized]=!0,document.querySelectorAll("script").forEach(function(e){e.src&&""!==e.src&&(l[e.src]=!0)}),o=new h(f),i=m(n.lazyScriptSelector),a=m(n.lazyScriptsSelector),c=m(n.lazyScriptDoneSelector),y(),b()}else console.info("ðŸ›ˆ LazyScripts already initialized");function f(){if(!u){var t=o.shift();if(t){if(t&&!l[t]){var e=document.createElement("script");return e.type="text/javascript",e.src=t,u=!0,e.dataset.lazyScript=!0,l[t]=!0,e.onload=function(){if(u=!1,f(),window.CustomEvent){var e=new CustomEvent(n.lazyScriptLoadedEventName,{detail:{scriptSrc:t}});document.body.dispatchEvent(e)}},e.onerror=function(){u=!1,l[t]=!1,f()},void document.body.appendChild(e)}0<o.length()&&window.setTimeout(function(){f()})}}}function d(e){e.dataset[i]&&o.push([e.dataset[i]]),o.push(JSON.parse(e.dataset[a]||"[]"))}function p(){t.forEach(function(e){return d(e)})}function y(){window.MutationObserver||console.info("MutationObserver not available.","DOM manipulations will not be recognised");var e=new MutationObserver(function(e,t){e.forEach(function(e){e.addedNodes.forEach(function(e){e.dataset&&((e.dataset[i]||e.dataset[a])&&(r?r.observe(e):p()),e.querySelectorAll(s).forEach(function(e){r?r.observe(e):p()}))})})}),t=document.querySelector("body");e.observe(t,n.mutationObserverOptions)}function b(){window.IntersectionObserver?(r=new IntersectionObserver(function(e,t){return n=t,void e.forEach(function(e){var t=e.isIntersecting,r=e.target;t&&(d(r),r.dataset[c]=!0,n.unobserve(r))});var n},n.intersectionObserverOptions),t.forEach(function(e){r.observe(e)})):window.requestAnimationFrame?window.requestAnimationFrame(function(){return p()}):p()}}});
